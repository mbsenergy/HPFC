---
title: "Montecarlo Price Level Simulation"
author: "Alejandro Abraham"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Montecarlo Price Level Simulation}
  %\VignetteEngine{knitr::rmarkdown}
---

## Setup

```{r}

box::use(
  data.table[...],
  magrittr[...],
  highcharter[...],
  reactable[...],
  HPFC[...]
)

devtools::load_all()

dt_spot_pwr = fread(file.path('run', 'Romania-PPC', '01_raw', 'history_pwr.csv'))
dt_spot_pwr = dt_spot_pwr[date >= '2023-01-01']
dt_fwd_pwr = fread('base_fwd_curve.csv')

sim_result = montecarlo_sim(
  S0 = 100,
  Td = 365,
  N = 20,
  dt_spot_pwr = dt_spot_pwr,
  dt_fwd_pwr = dt_fwd_pwr
)


```

```{r}
reactable(sim_result)
```


```{r}
sim_result |>
  hchart(type = "line", hcaes(x = yymm, y = value, group = sim)) |>
  hc_title(text = "Monte Carlo Simulation of a Random Walk") |>
  hc_xAxis(title = list(text = "Time (Months)")) |>
  hc_yAxis(title = list(text = "Price")) |>
  hc_tooltip(shared = TRUE) |>
  hc_theme("gridlight") |>
  hc_colors(c("blue", "red"))
```

