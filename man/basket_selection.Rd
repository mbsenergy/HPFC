% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/basket_selection.R
\name{basket_selection}
\alias{basket_selection}
\title{Automatic Basis Basket Selection for Commodity Curve Modeling}
\usage{
basket_selection(
  DT,
  mk_comm_0,
  basket = NULL,
  preview = FALSE,
  full = FALSE,
  start,
  end
)
}
\arguments{
\item{DT}{A \code{data.table} containing time series data with columns: \code{DATE}, \code{VALUE}, \code{COMMODITY}, and \code{TYPE}.}

\item{mk_comm_0}{Character. The reference commodity to model.}

\item{basket}{Optional character vector of additional commodities to consider as predictors. Defaults to \code{NULL}.}

\item{preview}{Logical. Currently unused. Defaults to \code{FALSE}.}

\item{full}{Logical. If \code{TRUE}, returns the full modeling output including the test set. Defaults to \code{FALSE}.}
}
\value{
A named list with elements:
\describe{
\item{coef_glm}{\code{data.frame} with selected commodities and their model coefficients and weights}
\item{R2_test}{R-squared of the out-of-sample test}
\item{mse_test}{Mean squared error on the test set}
\item{mae_test}{Mean absolute error on the test set}
\item{sd_residuals_test}{Standard deviation of residuals on the test set}
\item{dt_contcal_curves_test}{(only if \code{full = TRUE}) Full dataset with predictions and error analysis}
}
}
\description{
Selects an optimal basket of commodities to model the continuous calendar curve
of a target commodity using regularized linear regression (Lasso or Ridge).
}
\details{
This function uses a 6-month lookback window for out-of-sample validation. It applies L2-regularized linear regression (\code{alpha = 0})
using the \code{glmnet} package. NA values are forward-filled (NOCB). Model performance is reported with RÂ², MSE, MAE, and residuals' standard deviation.
}
